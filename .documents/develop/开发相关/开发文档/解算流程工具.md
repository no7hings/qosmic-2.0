## 更新

### 2025-0109
- 懒人任务空间：
	- 任务工具：
		- 绑定预设任务：
			- 新增布料预设模版的功能；
				- 创建/更新
					- 在创建其他模版之前推荐先创建“default”模版，节点属性是记录在各自的节点上。![[Pasted image 20250109133827.png]]
				- 加载：
					- 节点属性是记录在各自的节点上；  由于某些节点可能是在创建预设模版之后创建的，可能会出现某些节点没有特性的预设；  在找不到对应的预设的时候默认会加载“default”，如果没有“default”，将不会做任何操作；![[Pasted image 20250109134209.png]]
		- 布料解算任务：
			- 新增布料预设模版的功能：
				- 加载：
					- 选择一个角色的任意控制器点击加载模版；![[Pasted image 20250109134709.png]]
### 2025-0106
- 以下更新功能暂时只更新在测试环境中；
- 懒人任务空间：
	- 任务管理：
		- 支持公用空间和个人空间之间的切换：
			- 默认只在公用和个人空间之间切换，如果想进入某个人的空间，需要输对相关的人员的用户名；
			- 如果是日常制作，推荐是在公用空间；
			- 如果是测试，可以在个人空间；![[Pasted image 20250106102210.png]]
		- 在公用空间或其他人的空间下支持发送任务文件到个人空间：
			- 可以把公用空间的某个版本的文件发送到个人空间，在存到个人空间的时候，可以选择已有的任务单元，也可以新增任务单元（输入一个新的名字）
			- 发送到个人空间假如任务单元名已经存在，会在最后一个版本的基础上进行累加； ![[Pasted image 20250106104017.png]] ![[Pasted image 20250106102920.png]]
		- 在个人空间下支持发送任务文件到公用空间：
			- 逻辑同上 ![[Pasted image 20250106103759.png]]
		- 为了提高加载效率，默认只显示最近的10个版本（后面会增加调整显示最大版本数量的功能）
	- 桌面版本：
		- 安装，Y:/deploy/.shares/source/懒人工作空间（直接拖到桌面）
		- 任务追踪（新增）：
			- 可以查看已经发布的任务；![[Pasted image 20250106104758.png]]
			- 为了提高加载效率，这个页面有缓存机制；可以点击属性按钮强制刷新![[Pasted image 20250106105121.png]]
			- 右键点击资产/镜头可以跳转到任务管理对应的资产![[Pasted image 20250106105259.png]]
		- 任务管理：
			- 新增直接打开软件的功能；![[Pasted image 20250106105616.png]]
	- 资产解算预设任务：
		- 新增变体功能，默认为default，可以根据自己的需要输入一个新的名字（推荐制作变体的时候任务单元的名字和变体名字保持一致），发布面板会显示变体名字![[Pasted image 20250106105859.png]] ![[Pasted image 20250106110203.png]]
	- 镜头布料解算任务：
		- 新增变体切换；![[Pasted image 20250106110426.png]]
		- 参数预设功能还没找到完美的方案，后面再推
	- 解算测试：
		- 在资产绑定预设使用动作拼接（动作拼接的使用帮助后面会有对应的文档）进行解算参数测试；![[Pasted image 20250106112317.png]]
		- 点击创建拼接，选择ADV，选择一个动作预设然后创建，然后使用拍屏功能进行效果测试；![[Pasted image 20250106112605.png]]
		- 发布前务必移除拼接；![[Pasted image 20250106113022.png]]
### 2024-1216
- 流程框架新增测试环境：Y:\TEST\BETA-on.bat，点击进入测试环境（Y:\TEST\BETA-off.bat为退出测试环境，都需要重开MAYA才能完成切换）；
- 以下更新功能暂时只更新在测试环境中；
- 布料缓存任务：
	- 任务创建：
		- 支持替换上游文件（动画文件）：
			- 如果动画未设置缓冲帧需要修改动画文件，可以将修改后的动画文件存在本地，在创建布料解算任务的时候手动替换成本地文件再创建（替换完文件不要忘记点解析文件）；![[Pasted image 20241216112647.png]]
	- 任务工具：
		- 缓存解算：
			- 支持缓存解算：
				- 缓存解算需要动画文件设置好缓冲帧，并设置好帧范围，缓存起始帧默认为1（暂时不可手动设置）；
				- 选中一个或多个绑定（可以是任意部件）在布料解算任务中的任务工具>基础>加载/更新动画缓存；![[Pasted image 20241216121401.png]]
				- 如果动画文件未设置缓冲帧，可以自己存一个修改过的动画文件，点按钮右边的小三角，点击自定义加载/更新，然后在对话框中选择修改过的动画文件来出缓存（动画文件务必设置正确的动画结束帧）；
				- 如果需要更新缓存，重复以上操作；
			- 支持解算预设版本切换：
				- 在资源视图中右键点击cfx_rig，在弹出的菜单中旋转Load>v###进行版本切换；![[Pasted image 20241216121957.png]]
			- 支持缓存版本切换：
				- ani_geo_cache，在弹出的菜单中旋转Load>v###进行版本切换；![[Pasted image 20241216122307.png]]
			- 版本状态显示：
				- 如果使用的解算预设或者缓存是最后一版，对应的控件会显示绿色并在右边显示版本号，反之则显示黄色，会在括号中显示最后一版；![[Pasted image 20241216122541.png]]
## 流程工具示意
![[Pasted image 20241121133029.png]]
![[Pasted image 20241121133157.png]]
## 规范（需要讨论）
 >解算预设制作
 >	布料参数：
 >		需要统一的设置逻辑，尽量在默认解算器设置下进行调整
 >	初始帧：
 >		默认为1，在镜头下使用工具进行整体调整，也可给每个项目设置初始帧（不推荐， 比较混乱，最好有统一的起始帧）
## 概览
>工具主要分为三个页面，任务管理，任务工具，任务发布；
>任务管理分为资产和镜头两个分支，可以在任务创建+管理页面进行切换；
>工具支持桌面打开，不过桌面功能仅限预览，工具位置Y:/desktop-tools/懒人工作空间；
>工具目前为初版，后续根据使用反馈进行优化。
![[Pasted image 20241118133629.png]]
### 关键词说明
> asset（资产）：角色，道具，场景统称为资产；
> episode（剧集），sequence（场次），shot（镜头）：只支持镜头任务；
> step（环节）：一个环节下允许多种任务，解算的环节为cfx，目前只有cfx_rig的任务；
> task（任务）：任务是环节的扩展，解算预设的任务为cfx_rig，为了减少文件夹的深度目前step和task合并成单个文件夹；
> task_unit（任务单元）：允许把一个任务拆解成不同的小任务，但是最后发布的时候只会有一套数据，后续会用这个来实现多套预设的制作。
### 资产管理页面
#### 资产/镜头切换
> 输入任意字符串会自动补全实体名，也可点击后面的小三角![[Pasted image 20241118150012.png]]列出所有的子实体。
> 为了提高资产/镜头的读取速度，检索过程会被缓存。
> 如果未找到项目或资产/镜头，可以鼠标右键点刷新按钮![[Pasted image 20241118150428.png]]，然后在弹出的菜单中点击“从系统中重载”。
> 这个过程会比较慢，请耐心等待，鼠标左键点击为重新从缓存中读取。
> ![[Pasted image 20241118145425.png]]
> 在资产分支下输入项目名+资产名载入资产
> ![[Pasted image 20241118145403.png]]
> 在镜头分支需要舒服资产+场次号+镜头号载入镜头
#### 任务创建
#### 任务/任务单元视图
> 可以在这个视图切换任务和任务单元
> ![[Pasted image 20241118145116.png]]
#### 任务文件视图
> 默认高版本的会排在最上面，双击可以打开任务文件
![[Pasted image 20241118145132.png]]
> 所有的工程文件都是公用的（shared），后续根据情况增加个人空间
> 保存按钮默认为加存模式，既每次保存都会升一个版本。
> 暂时不支持任务单元之间的转存（保存到和另存为按钮）
![[Pasted image 20241118135822.png]]
---
### 资产解算预设制作
> 不要随意隐藏“cfx_output_geo_grp”下的模型，隐藏的模型默认不导出缓存
### 工具示意
![[Pasted image 20241121132300.png]]
### 任务工具
> 具体看工具说明
#### 制作示意图
![[Pasted image 20241121123828.png]]
![[Pasted image 20241120183518.png]]
![[Pasted image 20241120185420.png]]
### 任务发布
>根据提示进行发布。
![[Pasted image 20241121131610.png]]
---
## 镜头布料解算制作
### 工具示意
![[Pasted image 20241121132329.png]]
### 任务工具
> 具体看工具说明。
![[Pasted image 20241121125110.png]]
### 任务发布
> 这个任务暂时没有可发布的内容。
## 镜头解算整合制作
### 工具示意
![[Pasted image 20241121132357.png]]
### 任务工具
> 具体看工具说明。
![[Pasted image 20241121125339.png]]
### 任务发布
>根据提示进行发布。
![[Pasted image 20241121131446.png]]